<title>Cart | MXMNY</title>
<%= javascript_include_tag "application.js" %>


<body style="background-image:none;">


<ul class="checkout-nav" id="shipping-checkout-nav">
	<li>CART<span> > </span></li>
	<li>SHIPPING INFORMATION<span> > </span></li>
	<li>PAYMENT</li>
</ul>
<h1 class="h1-headers">CART</h1>
<div class="line-separator"></div>



<table id="cart-table">

	<tr><th></th><th>ITEM</th><th>PRICE</th><th>SIZE</th><th>REMOVE</th></tr>
<% if !@cart.blank? %> <!-- If the cart is NOT empty -->
	<% @cart.each do |key, count| %> <!-- iterate over each key in the cart -->
		<% 
			id, size = key.split('-') #split the object at "-" making "listing.id, size"
			listing = Listing.find_by_id(id) #find the listing by its id
			next if listing.blank? #proceed if there is no listing present
		%>
		<tr>
			<td><a href="/listings/<%= listing.id %>"><%= image_tag(listing.pictures.first.image.url) %></td>
			<td><%= listing.name %></td>
			<td><%= number_to_currency(listing.price) %></td>
			<td><%= size %></td>
			<td><%= link_to "X", remove_from_cart_listing_path(key), :method => :delete %></td>
		</tr>
	<% end %>
<% else %>
	<tr><td>No product in the cart</td></tr>
<% end %>

</table>
	<a href="/shipping"><button class="continue-button">Shipping -></button></a>
</body>



